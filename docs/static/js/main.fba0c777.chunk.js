(this["webpackJsonpmeeting-room-app"]=this["webpackJsonpmeeting-room-app"]||[]).push([[0],{28:function(e,t,n){},30:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n.n(a),i=n(21),r=n.n(i),s=(n(28),n(23)),o=n(8),l=n.n(o),u=n(9),d=n(12),m=n(7),j=(n(30),n(22)),f=(n(44),j.a.initializeApp({apiKey:"AIzaSyD9IVt_m4wXLxvzqSnhWZtIXzaUBcv5avg",authDomain:"meeting-room-4ffdc.firebaseapp.com",projectId:"meeting-room-4ffdc",storageBucket:"meeting-room-4ffdc.appspot.com",messagingSenderId:"794471345020",appId:"1:794471345020:web:84f9212832de24e7fd52f9",measurementId:"G-HTPWFZMGZ6"}).firestore()),b=function(e){for(var t=0,n=0;n!==e.length;){for(var a=0;a<e.length;a++)e[a+1]&&Number(e[a].id)>Number(e[a+1].id)&&(t=e[a+1],e[a+1]=e[a],e[a]=t);n++}return e},h=function(e){for(var t=0,n=0;n!==e.length;){for(var a=0;a<e.length;a++)e[a+1]&&Number(e[a].order)>Number(e[a+1].order)&&(t=e[a+1],e[a+1]=e[a],e[a]=t);n++}return e},p=n(15),O=n.n(p),v=O.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2500,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",O.a.stopTimer),e.addEventListener("mouseleave",O.a.resumeTimer)}}),x=function(e,t){v.fire({icon:e,title:t})},g=n(1),N=function(e){var t=e.onAdd,n=e.onDisable,c=e.onLoadEvent,i=Object(a.useState)([]),r=Object(m.a)(i,2),s=r[0],o=r[1],j=Object(a.useState)(""),b=Object(m.a)(j,2),p=b[0],O=b[1],v=Object(a.useState)(""),N=Object(m.a)(v,2),w=N[0],y=N[1],D=Object(a.useState)(""),S=Object(m.a)(D,2),I=S[0],E=S[1],T=Object(a.useState)(""),k=Object(m.a)(T,2),M=k[0],B=k[1],A=Object(a.useState)(""),C=Object(m.a)(A,2),G=C[0],z=C[1],J=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.collection("dates/".concat(t,"/times")).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id}))})),o(h(t))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){console.log("Getting times from DB..."),J(L(M))}),[M]);var L=function(e){var t=e.split("-");return"".concat(Number(t[2]),"-").concat(Number(t[1]),"-").concat(Number(t[0]))};return Object(g.jsxs)("form",{className:"box",onSubmit:function(e){if(e.preventDefault(),p&&w&&I&&M&&G){for(var a=w.split("-")[1],i=I.split("-")[1],r=a-1;r<=i;r++)n(L(M),r);var s=p.split(","),o=[];s.forEach((function(e){return o.push({email:e.trim()})}));var l=G.split("-")[0].trim(),u=G.split("-")[1].trim(),d=w.split("-")[0],m=I.split("-")[0];t({emails:o,initial:d,final:m,date:M,newTitle:l,newDescription:u}),console.log({emails:o,initial:d,final:m,date:M,newTitle:l,newDescription:u});var j,f={summary:(j={emails:o,initial:d,final:m,date:M,newTitle:l,newDescription:u}).newTitle,description:j.newDescription,start:{dateTime:new Date("".concat(j.date," ").concat(j.initial," GMT-5")),timeZone:"Mexico/General"},end:{dateTime:new Date("".concat(j.date," ").concat(j.final," GMT-5")),timeZone:"Mexico/General"},attendees:j.emails,reminders:{useDefault:!1,overrides:[{method:"popup",minutes:10}]}};console.log(f),c(f),O(""),y("Desde"),E("Hasta"),B(""),z("")}else x("error","Hay campos vac\xedos, completa el formulario.")},children:[Object(g.jsx)("div",{className:"container-2",children:Object(g.jsx)("h1",{className:"title montse",children:"Sala de juntas"})}),Object(g.jsxs)("div",{className:"container-3",children:[Object(g.jsx)("span",{className:"icon",children:Object(g.jsx)("i",{className:"fa fa-user"})}),Object(g.jsx)("input",{type:"text",id:"name",autoComplete:"off",className:"montse",placeholder:"Correos",onChange:function(e){return O(e.target.value)},value:p})]}),Object(g.jsxs)("div",{className:"container-4",children:[Object(g.jsx)("span",{className:"icon",children:Object(g.jsx)("i",{className:"fas fa-calendar"})}),Object(g.jsx)("input",{type:"date",id:"date",className:"montse",onChange:function(e){return B(e.target.value)},value:M})]}),Object(g.jsxs)("div",{className:"container-5",children:[Object(g.jsx)("span",{className:"icon",children:Object(g.jsx)("i",{className:"fas fa-hourglass-start"})}),Object(g.jsxs)("select",{name:"times",className:"montse",id:"initial-time",onChange:function(e){return y(e.target.value)},children:[Object(g.jsx)("option",{value:"none",defaultValue:!0,children:"Desde"},"---"),s.map((function(e){return e.available?Object(g.jsx)("option",{id:e.hour,value:e.hour+"-"+e.order,children:e.hour},e.hour):Object(g.jsx)("option",{id:e.hour,disabled:!0,value:e.hour+"-"+e.order,children:e.hour},e.hour+"dis")}))]})]}),Object(g.jsxs)("div",{className:"container-5",children:[Object(g.jsx)("span",{className:"icon",children:Object(g.jsx)("i",{className:"fas fa-hourglass-end"})}),Object(g.jsxs)("select",{name:"times2",className:"montse",id:"final-time",onChange:function(e){return E(e.target.value)},children:[Object(g.jsx)("option",{value:"none",defaultValue:!0,children:"Hasta"},"---"),s.map((function(e){return e.available?Object(g.jsx)("option",{id:e.hour,value:e.hour+"-"+e.order,children:e.hour},e.hour):Object(g.jsx)("option",{id:e.hour,disabled:!0,value:e.hour+"-"+e.order,children:e.hour},e.hour+"dis")}))]})]}),Object(g.jsxs)("div",{className:"container-6",children:[Object(g.jsx)("span",{className:"icon",children:Object(g.jsx)("i",{className:"fas fa-align-left"})}),Object(g.jsx)("textarea",{id:"description2",cols:"30",rows:"5",placeholder:"T\xedtulo - Descripci\xf3n",onChange:function(e){return z(e.target.value)},value:G})]}),Object(g.jsx)("button",{id:"btnReservar",className:"montse",children:"Reservar"})]})},w=function(e){var t=e.id,n=e.icon;e.show;return Object(g.jsx)("a",{id:t,href:"/",children:Object(g.jsx)("i",{className:"fa fa-"+n})})},y=function(){return Object(g.jsx)("div",{className:"leftbox",children:Object(g.jsxs)("nav",{children:[Object(g.jsx)(w,{id:"dashboard",icon:"circle"}),Object(g.jsx)(w,{id:"profile",icon:"circle"}),Object(g.jsx)(w,{id:"settings",icon:"circle"}),Object(g.jsx)(w,{id:"messages",icon:"circle"}),Object(g.jsx)(w,{id:"notification",icon:"circle"})]})})},D=function(e){var t=e.date,n=e.month,a=e.year,c=e.initial_time,i=e.final_time,r=e.title;e.name;return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("li",{className:"rb-item","ng-repeat":"itembx",children:[Object(g.jsxs)("div",{className:"timestamp",children:[t," de ",n," ",a," ","\n",c," "," - "," ",i," ","\n"]}),Object(g.jsx)("div",{className:"item-title",children:r})]})})},S=function(e){var t=e.schedules,n=Object(a.useState)(t),c=Object(m.a)(n,2),i=c[0],r=c[1];Object(a.useEffect)((function(){r(t)}),[t]);var s=function(e){switch(e){case"01":return"Enero";case"02":return"Febrero";case"03":return"Marzo";case"04":return"Abril";case"05":return"Mayo";case"06":return"Junio";case"07":return"Julio";case"08":return"Agosto";case"09":return"Septiembre";case"10":return"Octubre";case"11":return"Noviembre";case"12":return"Diciembre";default:return"Undefined"}};return Object(g.jsx)("ul",{className:"rb",children:i.map((function(e,t){return Object(g.jsx)(D,{date:e.date.split("-")[2],month:s(e.date.split("-")[1]),year:e.date.split("-")[0],initial_time:e.initial,final_time:e.final,title:e.newTitle,name:e.name},t)}))})},I=function(e){var t=e.schedules;return Object(g.jsx)("div",{className:"rightbox",children:Object(g.jsx)("div",{className:"rb-container montse",children:t.length>0?Object(g.jsx)(S,{schedules:t}):Object(g.jsx)("h4",{className:"title-no-schedules",children:"No hay juntas"})})})};var E=function(){var e=["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],t=Object(a.useState)([]),n=Object(m.a)(t,2),c=n[0],i=n[1],r=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.collection("schedules").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id}))})),i(b(t).reverse())}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.collection("schedules").doc("".concat(Date.now())).set(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.collection("dates/".concat(t,"/times")).where("order","==",n),e.next=3,a.get();case 3:e.sent.forEach((function(e){f.doc("dates/".concat(t,"/times/").concat(e.id)).set(Object(u.a)(Object(u.a)({},e.data()),{},{available:!1}))}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){console.log("Getting data from DB..."),r()}),[]),Object(g.jsxs)("div",{className:"container",children:[Object(g.jsx)(N,{onAdd:function(e){i([e].concat(Object(s.a)(c))),o(e),x("success","Junta agregada correctamente")},onDisable:j,onLoadEvent:function(t){gapi.load("client:auth2",(function(){console.log("loaded client"),gapi.client.init({apiKey:"AIzaSyDv_dBsfvmRnfKWMy88bJoBxI46V2M4Q8U",clientId:"167105045097-pm2ku6m83ckujs84jij96som2o76u9ju.apps.googleusercontent.com",discoveryDocs:e,scope:"https://www.googleapis.com/auth/calendar.events"}),gapi.client.load("calendar","v3",(function(){return console.log("bam!")})),gapi.auth2.getAuthInstance().signIn().then((function(){gapi.client.calendar.events.insert({calendarId:"primary",resource:t}).execute((function(e){console.log(e),window.open(e.htmlLink)}))}))}))}}),Object(g.jsx)(y,{}),Object(g.jsx)(I,{schedules:c})]})};r.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(E,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.fba0c777.chunk.js.map